define("@widget/MESSAGING/bs-Component-d750a9f7.js",["radpack","exports","@wsb/guac-widget-shared@^1/lib/components/Recaptcha/badge","@wsb/guac-widget-shared@^1/lib/common/constants/traffic2","@wsb/guac-widget-shared@^1/lib/common/constants/form/formIdentifiers"],(function(e,a,o,t,r){"use strict";var l=(global.keyMirror||guac.keymirror)({MESSAGING_FAB:null,MESSAGING_MESSAGE_FLYOUT:null,WELCOME_MESSAGE:null,SEND_MESSAGE_TO:null,EMAIL_OPT_IN_TOGGLE:null,EMAIL_OPT_IN_MESSAGE:null,COLOR_SATURATION_KNOB:null,COLOR_HUE_SLIDER_KNOB:null});const s=(global.React||guac.react).createElement("path",{d:"M0.342304 14.5C7.35025 6.3293 3.35025 0.829295 0 0.0.0 0.0 5.4 2.1 32.3502 0.329295C32.3503 3.8293 -3.13481 20.7261 0.342304 14.5Z"});function p(e){let{text:a}=e;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:"overlay",style:{backgroundColor:"neutral",margin:"-medium medium medium medium",borderRadius:"5px",position:"relative"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,{style:{padding:"12px 15px",borderRadius:"5px",backgroundColor:"primaryOverlay",fontSize:"16px",color:"neutral"}},a),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{icon:s,size:24,style:{width:"33px",height:"16px",color:"primaryOverlay",position:"absolute",top:"100%",left:"3px",marginTop:"-1px"}}))}function c(e){let{title:a,message:o,children:t,onClose:r}=e;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":l.MESSAGING_MESSAGE_FLYOUT,style:{"-webkit-overflow-scrolling":"touch",overflowX:"hidden",overflowY:"auto",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",backgroundColor:"neutral",borderRadius:"5px",borderWidth:"xsmall",borderStyle:"solid",borderColor:"#fff",width:"382px",marginBottom:"small",position:"absolute",maxHeight:"calc(100vh - 105px)",right:"-1px",bottom:"100%","@xs-only":{maxHeight:"100vh",height:"100vh",zIndex:"inherit",position:"fixed",left:"0",top:"0",bottom:"89px",width:"100%"}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-field-id":"formEmail"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{onClick:r,icon:"close",size:22,style:{color:"#fff",position:"absolute",top:"18px",right:"14px",cursor:"pointer","@sm":{display:"none"}}}),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading,{style:{color:"action",fontSize:"large",backgroundColor:"action",paddingTop:"small",paddingBottom:o?"xlarge":"small",paddingLeft:"medium",paddingRight:"medium",margin:o?"0":"0 0 medium 0",textAlign:"left","@md":{textAlign:"left"}}},a),o?(global.React||guac.react).createElement(p,{text:o}):null,(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{overflow:"hidden",padding:"0 medium"}},t)))}p.propTypes={text:(global.PropTypes||guac["prop-types"]).string.isRequired},c.propTypes={title:(global.PropTypes||guac["prop-types"]).string.isRequired,message:(global.PropTypes||guac["prop-types"]).string.isRequired,children:(global.PropTypes||guac["prop-types"]).node.isRequired,onClose:(global.PropTypes||guac["prop-types"]).func.isRequired};const{renderModes:n}=(global.Core||guac["@wsb/guac-widget-core"]).constants,i="reamazejs-container";function g(e){const{position:a,prompt:o,promptEnabled:t,starter1:r,starter2:l,starter3:s,starter4:p,starter5:c,color:g,reamazeBrandId:u,reamazeWrap:d,reamazeJsSource:m,reamazeCookieJsSource:b,cookieBannerEnabled:y,confirmationMessage:w,avatar:f,forceShowFlyout:E,renderMode:T,embeddableSlug:S}=e,[P,R]=(global.React||guac.react).useState(!0),[_,C]=(global.React||guac.react).useState(!0),I=(e,a,o,t,r,l)=>({mode:"notification",delay:T===n.EDIT?0:10,text:e,primary:a||null,primary2:o||null,primary3:t||null,primary4:r||null,primary5:l||null}),h=(e,a)=>{e.forEach((e=>{const o=e.addedNodes[0];if(o?.id===i&&T===n.EDIT&&d?.current)return d.current.append(o),void a.disconnect()}))};return(global.React||guac.react).useEffect((()=>{if(T===n.EDIT){const e=document.getElementById(i);if(void 0!==window.reamaze&&e)d.current.append(e);else{const e={childList:!0};new MutationObserver(h).observe(document.body,e)}}const e=(e=>{const a=e.createElement("script");return a.src=T!==n.EDIT&&y?b:m,a.async=!0,a.type="text/javascript",a})(document);return document.body.appendChild(e),window._support={account:u,openPopup:E,ui:{contactMode:"default",enableKb:"false",styles:{widgetColor:g},widget:{icon:"webChat",label:!(!(t||r||l||s||p||c)||T===n.EDIT)&&I(o,r,l,s,p,c),position:a,slug:S},shoutboxFacesMode:"custom",overrides:{confirmationMessage:w}},user:{authpath:`/m/api/reamaze/v2/customers/auth?brand=${u}`},_preview:E},()=>{void 0!==window.reamaze&&T===n.EDIT&&(window._support.ui.widget=!1,window._support.openPopup=!1,window._support._preview=!1,window.reamaze.reload());const e=document.querySelector(`script[src='${m}']`);e&&e.remove();const a=document.getElementById(i);a&&a.remove()}}),[]),(global.React||guac.react).useEffect((()=>{T===n.EDIT&&(window._support.ui.widget.position=a,window._support.ui.styles={widgetColor:g},window._support.ui.shoutboxFacesMode="custom",window._support.openPopup=E,window._support._preview=E,window._support._route=null,window._support.ui.widget.label=!1,void 0!==window.reamaze&&window.reamaze.reload())}),[a,g,f,E]),(global.React||guac.react).useEffect((()=>{T===n.EDIT&&(P?R(!1):(window._support.ui.widget.label=!(!t||!E)&&I(o,r,l,s,p,c),window._support.openPopup=!1,void 0!==window.reamaze&&window.reamaze.reload()))}),[o,t,r,l,s,p,c]),(global.React||guac.react).useEffect((()=>{T===n.EDIT&&(_?C(!1):(window._support._route="conversations:show",window._support._routeParams={slug:"*mock_confirm_convo*"},window._support.ui.overrides.confirmationMessage=w,window._support.openPopup=E,window._support._preview=E,void 0!==window.reamaze&&window.reamaze.reload()))}),[w]),(global.React||guac.react).createElement("div",null)}g.propTypes={position:(global.PropTypes||guac["prop-types"]).string,prompt:(global.PropTypes||guac["prop-types"]).string,promptEnabled:(global.PropTypes||guac["prop-types"]).bool,starter1:(global.PropTypes||guac["prop-types"]).string,starter2:(global.PropTypes||guac["prop-types"]).string,starter3:(global.PropTypes||guac["prop-types"]).string,starter4:(global.PropTypes||guac["prop-types"]).string,starter5:(global.PropTypes||guac["prop-types"]).string,color:(global.PropTypes||guac["prop-types"]).string,reamazeBrandId:(global.PropTypes||guac["prop-types"]).string,reamazeJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeCookieJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeWrap:(global.PropTypes||guac["prop-types"]).node,confirmationMessage:(global.PropTypes||guac["prop-types"]).string,avatar:(global.PropTypes||guac["prop-types"]).string,forceShowFlyout:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,cookieBannerEnabled:(global.PropTypes||guac["prop-types"]).bool,embeddableSlug:(global.PropTypes||guac["prop-types"]).string};const u={contactApi:/[?&]contactApiVersion=([^&]*)/};function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"contactApi";if("undefined"==typeof window)return"";const{location:{search:a=""}}=window||{},o=u[e].exec(a);return o&&o[1]?`${o[1]}.`:""}const m="EMAIL",b="CONVERSATIONS",{utils:{TCCLUtils:y}}=(global.Core||guac["@wsb/guac-widget-core"]).UX2,{MESSAGING_EMAIL:w,MESSAGING_CONVERSATIONS:f}=r.default,{Z_INDEX_COOKIE_BANNER:E,Z_INDEX_FULL_SCREEN_OVERLAY:T,Z_INDEX_STICKY_NAV:S}=(global.Core||guac["@wsb/guac-widget-core"]).constants.layers,{renderModes:P}=(global.Core||guac["@wsb/guac-widget-core"]).constants,R=e=>{let{keyName:a}=e;return"phone"!==a},_=(global.React||guac.react).lazy((()=>new Promise((function(a,o){e.require(["@wsb/guac-widget-shared@^1/lib/components/Form"],a,o)})))),C={marginBottom:"medium",display:"block",textAlign:"center",color:"action"};function I(e){const{id:a,section:r,forceShowFlyout:s,welcomeMessage:p,config:n,formFields:i,formSuccessMessage:u,emailOptInEnabled:I,emailOptInMessage:h,notificationPreference:z,recaptchaType:M,emailConfirmationMessage:x,locale:v,websiteId:A,accountId:k,domainName:N,staticContent:O,isReseller:B,businessName:G,reamazeBrandId:L,reamazePrompt:U,reamazeStarter1:X,reamazeStarter2:F,reamazeStarter3:D,reamazeStarter4:q,reamazeStarter5:J,reamazePromptEnabled:H,reamazeThemeColor:j,reamazePosition:V,reamazeEmbeddableSlug:W,reamazeConfirmationMessage:Z,reamazeAvatarImage:K,renderMode:Y,cookieBannerEnabled:$}=e,Q=(global.React||guac.react).useRef(!1),[ee,ae]=(global.React||guac.react).useState(s),[oe,te]=(global.React||guac.react).useState(e.isMobile),re=Y===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.PUBLISH,le=()=>ae(!ee);(global.React||guac.react).useEffect((()=>{const e=window.document?.body;e&&re&&(oe&&ee?e.classList.add("disable-scroll"):e.classList.remove("disable-scroll"))}),[ee,oe]),(global.React||guac.react).useEffect((()=>{ee!==s&&ae(s)}),[s]),(global.React||guac.react).useEffect((()=>{Q.current?ae(!0):Q.current=!0}),[p,u,I,h]);const se=z===m?i.filter(R):i,pe=z===m?w:f,ce=(global.React||guac.react).useRef(null);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{category:"neutral",section:r,style:{position:"fixed",right:"medium",bottom:"medium",zIndex:ee?T:E-1,width:"65px",height:"65px","@md":{zIndex:ee?S+1:E-1}}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX.MatchMedia,{onChange:a=>{const o=re&&a?"xs"===a.size:e.isMobile;te(o)}}),Y!==P.PREVIEW&&"REAMAZE"===z&&L&&(global.React||guac.react).createElement("div",{ref:ce},(global.React||guac.react).createElement(g,{position:V,prompt:U,promptEnabled:H,starter1:X,starter2:F,starter3:D,starter4:q,starter5:J,color:j,reamazeBrandId:L,reamazeWrap:ce,reamazeJsSource:n.reamazeJsSource,reamazeCookieJsSource:n.reamazeCookieJsSource,confirmationMessage:Z,avatar:K,forceShowFlyout:s,cookieBannerEnabled:$,renderMode:Y,embeddableSlug:W})),[m,b].includes(z)&&(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,ee?(global.React||guac.react).createElement(c,{title:G,message:p,onClose:le},"undefined"!=typeof window?(global.React||guac.react).createElement((global.React||guac.react).Suspense,{fallback:(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:C},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Loader,{size:"medium"}))},(global.React||guac.react).createElement(_,{locale:v,websiteId:A,accountId:k,domainName:N,staticContent:O,emailConfirmationMessage:x,emailOptInEnabled:I,emailOptInMessage:h,formSuccessMessage:u,formSubmitEndpoint:n.formSubmitEndpoint,formSubmitHost:n.formSubmitHost.replace("{{SHA}}",d()),formFields:se,formIdentifier:pe,recaptchaType:M,recaptchaEnabled:Boolean(M),isReseller:B,category:"neutral",pageId:"00000000-0000-0000-0000-000000000000",widgetId:a,renderMode:Y,dataAidPrefix:"MESSAGING"})):null):(global.React||guac.react).createElement(o.default,null),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{"data-aid":l.MESSAGING_FAB,"data-field-id":oe||s?null:"enabled","data-edit-interactive":"true",onClick:le,"data-traffic2":ee?t.default.editor_preview.messaging_fab_close:t.default.editor_preview.messaging_fab_open,"data-tccl":y.getTCCLString({eid:ee?"ux2.messaging.fab.close":"ux2.messaging.fab.open",type:"click"}),style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:ee?"#555":"action",boxShadow:"0px 3px 18px rgba(0, 0, 0, 0.25)",transform:"translateZ(0)"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Icon,{style:{color:ee?"#fff":"action"},icon:ee?"close":"chat",size:ee?34:44}))))}I.propTypes={forceShowFlyout:(global.PropTypes||guac["prop-types"]).bool,businessName:(global.PropTypes||guac["prop-types"]).string,reamazeBrandId:(global.PropTypes||guac["prop-types"]).string,welcomeMessage:(global.PropTypes||guac["prop-types"]).string,formSuccessMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInMessage:(global.PropTypes||guac["prop-types"]).string,emailOptInEnabled:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,domainName:(global.PropTypes||guac["prop-types"]).string,cookieBannerEnabled:(global.PropTypes||guac["prop-types"]).bool,config:(global.PropTypes||guac["prop-types"]).shape({formSubmitEndpoint:(global.PropTypes||guac["prop-types"]).string,formSubmitHost:(global.PropTypes||guac["prop-types"]).string,reamazeJsSource:(global.PropTypes||guac["prop-types"]).string,reamazeCookieJsSource:(global.PropTypes||guac["prop-types"]).string}),formFields:(global.PropTypes||guac["prop-types"]).array,accountId:(global.PropTypes||guac["prop-types"]).string.isRequired,websiteId:(global.PropTypes||guac["prop-types"]).string.isRequired,id:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object.isRequired,locale:(global.PropTypes||guac["prop-types"]).string,emailConfirmationMessage:(global.PropTypes||guac["prop-types"]).string,recaptchaType:(global.PropTypes||guac["prop-types"]).string,isMobile:(global.PropTypes||guac["prop-types"]).bool,notificationPreference:(global.PropTypes||guac["prop-types"]).string,isReseller:(global.PropTypes||guac["prop-types"]).bool,reamazePrompt:(global.PropTypes||guac["prop-types"]).string,reamazePromptEnabled:(global.PropTypes||guac["prop-types"]).bool,reamazeStarter1:(global.PropTypes||guac["prop-types"]).string,reamazeStarter2:(global.PropTypes||guac["prop-types"]).string,reamazeStarter3:(global.PropTypes||guac["prop-types"]).string,reamazeStarter4:(global.PropTypes||guac["prop-types"]).string,reamazeStarter5:(global.PropTypes||guac["prop-types"]).string,reamazeThemeColor:(global.PropTypes||guac["prop-types"]).string,reamazePosition:(global.PropTypes||guac["prop-types"]).string,reamazeEmbeddableSlug:(global.PropTypes||guac["prop-types"]).string,reamazeConfirmationMessage:(global.PropTypes||guac["prop-types"]).string,reamazeAvatarImage:(global.PropTypes||guac["prop-types"]).string,renderMode:(global.PropTypes||guac["prop-types"]).string},a.default=I,Object.defineProperty(a,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-Component-d750a9f7.js.map
